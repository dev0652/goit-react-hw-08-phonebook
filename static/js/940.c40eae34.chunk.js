"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[940],{8940:function(n,e,r){r.r(e),r.d(e,{default:function(){return Jn}});var t,o,i,a,c,d=r(9439),l=r(2791),s=r(9434),u=r(2286),h=r(3634),f=r(781),g=r(5218),x=r(9677),p=r(3433),m=r(168),v=r(7924),b=v.zo.ul(t||(t=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n\n  overflow-y: auto;\n  padding-right: 20px;\n"]))),w=v.zo.li(o||(o=(0,m.Z)(["\n  width: 100%;\n  display: flex;\n"]))),z=(v.zo.div(i||(i=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n"]))),v.zo.p(a||(a=(0,m.Z)([""]))),v.zo.a(c||(c=(0,m.Z)(["\n  flex-grow: 1;\n  color: black;\n  font-size: 1.1rem;\n  text-decoration: none;\n  padding: 10px 20px;\n  border-radius: ",";\n\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n\n  &:hover,\n  &:focus {\n    color: ",";\n    background-color: #4285f4;\n    font-weight: 500;\n  }\n"])),(function(n){return n.theme.borderRadius.regular}),(function(n){return n.theme.colors.highlightedText}))),j=r(1816),Z=r(3329);function y(){var n=(0,s.I0)(),e=(0,s.v9)(u.hF),r=(0,p.Z)(e).sort((function(n,e){return n.name.localeCompare(e.name)})),t=function(e){e.preventDefault(),n((0,j.f)(e.target.id))};return(0,Z.jsx)(b,{children:r.map((function(n){var e=n.id,r=n.name;n.phone;return(0,Z.jsx)(w,{children:(0,Z.jsx)(z,{href:"",onClick:t,id:e,children:r})},e)}))})}var k,C=r(1273),E=r(1448),A=(0,v.zo)(E.nv)(k||(k=(0,m.Z)(["\n  width: 100%;\n"])));function S(){var n=(0,s.v9)(u.Af).items,e=(0,s.v9)(u.AD),r=(0,s.I0)();(0,l.useEffect)((function(){var e=document.querySelector("#searchBox");e&&(0===n.length&&e.setAttribute("disabled",""),n.length>0&&e.removeAttribute("disabled"))}),[n.length]);return(0,Z.jsx)(A,{type:"text",value:e,onChange:function(n){var e=n.target.value.toLowerCase().trim();r((0,C.a)(e))},placeholder:0===n.length?"Phonebook is empty":1===n.length?"Not enough contacts to search in":"Search ".concat(n.length," contacts"),id:"searchBox"})}var T,N,P=r(4164),_=v.ZP.div(T||(T=(0,m.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n  cursor: cell;\n"]))),I=v.ZP.div(N||(N=(0,m.Z)(["\n  cursor: auto;\n\n  width: 90%;\n  max-width: 480px;\n  /* background-color: #fff; */\n  padding: 60px;\n  padding-top: 40px;\n  align-self: flex-start;\n  margin-top: 20vh;\n\n  border-radius: ",";\n\n  --background-fallback: rgb(245, 245, 245);\n  --gradient-start-color: rgba(240, 248, 255, 1);\n  --gradient-end-color: rgba(245, 245, 245, 1);\n\n  background: var(--background-fallback);\n  background: linear-gradient(\n    0deg,\n    var(--gradient-start-color) 55%,\n    var(--gradient-end-color) 100%\n  );\n"])),(function(n){return n.theme.borderRadius.regular})),L=document.querySelector("#modal-root");function q(n){var e=n.onClose,r=n.children;(0,l.useEffect)((function(){var n=function(n){"Escape"===n.code&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}));return(0,P.createPortal)((0,Z.jsx)(_,{onClick:function(n){n.target===n.currentTarget&&e()},children:(0,Z.jsx)(I,{children:r})}),L)}var M,V,R,W,D,B,F,H,K,O,Y,G,J=r(645),$=r(58),Q=r(9126),U=v.zo.div(M||(M=(0,m.Z)(["\n  border-radius: ",";\n\n  padding: 20px 30px;\n  flex-grow: 1;\n  max-width: 400px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"])),(function(n){return n.theme.borderRadius.regular})),X=v.zo.div(V||(V=(0,m.Z)(["\n  border-radius: ",";\n  overflow: hidden;\n  width: 200px;\n\n  box-shadow: ",";\n"])),(function(n){return n.theme.borderRadius.regular}),(function(n){return n.theme.boxShadow})),nn=v.zo.img(R||(R=(0,m.Z)(["\n  object-position: center;\n  object-fit: cover;\n"]))),en=v.zo.div(W||(W=(0,m.Z)(["\n  font-size: 1.5rem;\n  color: black;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),rn=v.zo.p(D||(D=(0,m.Z)(["\n  font-size: 2rem;\n  font-weight: 600;\n"]))),tn=(0,v.zo)($.t)(B||(B=(0,m.Z)([""]))),on=(0,v.zo)($.t)(F||(F=(0,m.Z)([""]))),an=v.zo.div(H||(H=(0,m.Z)(["\n  display: flex;\n  gap: 20px;\n"]))),cn=(0,v.zo)(J.Yd)(K||(K=(0,m.Z)([""]))),dn=(0,v.zo)(J.Yd)(O||(O=(0,m.Z)(["\n  &:hover,\n  &:focus {\n    color: whitesmoke;\n    background-color: ",";\n    font-weight: 500;\n  }\n"])),(function(n){return n.theme.colors.warning})),ln=(0,v.zo)(Q._y7)(Y||(Y=(0,m.Z)(["\n  --size: 60%;\n  /* height: var(--size); */\n  width: var(--size);\n"])));(0,v.zo)(J.HL)(G||(G=(0,m.Z)(["\n  --size: 40px;\n\n  color: ",";\n\n  &:hover,\n  &:focus {\n    color: ",";\n    background-color: ",";\n    font-weight: 500;\n\n    & > "," {\n      transform: scale(1.1);\n    }\n  }\n"])),(function(n){return n.theme.colors.secondaryText}),(function(n){return n.theme.colors.highlightedText}),(function(n){return n.theme.colors.warning}),ln);function sn(n){var e=n.formType,r=n.editValues,t=void 0===r?null:r,o=n.toggleModal,i=(0,s.I0)(),a=(0,s.v9)(u.Af).items,c=function(n,e){var r,t,o,i;"add"===n&&(r="",t="",o="Add contact");"edit"===n&&(r=e.name,t=e.number,o="Save changes");return{initNameValue:r,initNumberValue:t,buttonText:o,operation:i}}(e,t),f=c.initNameValue,x=c.initNumberValue,p=c.buttonText,m=(0,l.useState)(f),v=(0,d.Z)(m,2),b=v[0],w=v[1],z=(0,l.useState)(x),j=(0,d.Z)(z,2),y=j[0],k=j[1],C=function(n){var e=n.currentTarget,r=e.name,t=e.value;switch(r){case"name":w(t);break;case"number":k(t);break;default:return}};return(0,Z.jsxs)(E.n5,{onSubmit:function(n){n.preventDefault();var r=function(n,e,r){var t,o,i;"add"===n&&(i=h.uK,t=r,o="Contact '".concat(r.name,"' was added"));if("edit"===n){var a=e.id;i=h.mP,t={id:a,editedContact:r},o="Changes have been saved"}return{operation:i,operationArgs:t,toastMessage:o}}(e,t,{name:b,number:y}),c=r.operation,d=r.operationArgs,l=r.toastMessage;"add"===e&&un(a,b)?g.ZP.error("".concat(b," is already a contact")):(i(c(d)).unwrap().then((function(n){if(n.error)throw new Error(n.payload);return g.ZP.success(l)})).catch((function(n){return g.ZP.error(n.message)})),o())},children:[(0,Z.jsxs)(E.V$,{children:[(0,Z.jsx)(E.nv,{type:"text",name:"name",required:!0,value:b,onChange:C,placeholder:"Name"}),(0,Z.jsx)(E.nv,{type:"tel",name:"number",required:!0,value:y,onChange:C,placeholder:"Telephone"})]}),(0,Z.jsx)(E.Mm,{type:"submit",children:p})]})}var un=function(n,e){return n.find((function(n){return n.name.toLowerCase()===e.toLowerCase()}))};function hn(){var n=(0,l.useState)(!1),e=(0,d.Z)(n,2),r=e[0],t=e[1],o=function(){return t(!r)},i=(0,s.I0)(),a=(0,s.v9)(u.Af),c=a.items,p=a.currentId,m=c.find((function(n){return n.id===p})),v=m.name,b=m.number,w=f.We.internet.exampleEmail(),z=f.We.image.avatar(),j={name:v,number:b,id:p};return(0,Z.jsxs)(U,{children:[(0,Z.jsx)(X,{children:(0,Z.jsx)(nn,{src:z,alt:v,width:640})}),(0,Z.jsxs)(en,{children:[(0,Z.jsx)(rn,{children:v}),(0,Z.jsx)(tn,{href:"tel:+".concat(b),children:b}),(0,Z.jsx)(on,{href:"mailto:".concat(w),children:w})]}),(0,Z.jsxs)(an,{children:[(0,Z.jsx)(cn,{type:"button",onClick:o,children:"Edit"}),(0,Z.jsx)(dn,{type:"button",onClick:function(){return n=p,void i((0,h.GK)(n)).then((function(n){if(n.error)throw new Error(n.payload);return g.Am.success("Contact has been deleted")})).catch((function(n){return g.Am.error(n.message)}));var n},children:"Delete"})]}),r&&(0,Z.jsx)(q,{onClose:o,children:(0,Z.jsx)(x.Z,{title:"Edit Contact",children:(0,Z.jsx)(sn,{formType:"edit",editValues:j,toggleModal:o})})})]})}var fn,gn,xn,pn,mn,vn=r(458),bn=r(1213),wn=v.zo.div(fn||(fn=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  align-items: center;\n  color: silver;\n\n  margin-top: 20vh;\n"]))),zn=v.zo.div(gn||(gn=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),jn=(0,v.zo)(vn.ttH)(xn||(xn=(0,m.Z)(["\n  --size: 5rem;\n  height: var(--size);\n  width: var(--size);\n"]))),Zn=(0,v.zo)(bn.toq)(pn||(pn=(0,m.Z)(["\n  --size: 5rem;\n  height: var(--size);\n  width: var(--size);\n"]))),yn=v.zo.p(mn||(mn=(0,m.Z)(["\n  font-size: 1.5rem;\n  text-align: center;\n"])));function kn(n){var e=n.isError,r=void 0!==e&&e,t=n.isEmpty,o=r?["Something went wrong","Try refreshing the page or check back later"]:[t?"Phonebook is empty":"Select a contact to view details"];return(0,Z.jsxs)(wn,{children:[r?(0,Z.jsx)(Zn,{}):(0,Z.jsx)(jn,{}),(0,Z.jsx)(zn,{children:o.map((function(n){return(0,Z.jsx)(yn,{children:n})}))})]})}var Cn,En,An,Sn,Tn,Nn,Pn,_n,In,Ln=r(8617),qn=document.querySelector(".header").getBoundingClientRect().height,Mn="".concat(qn,"px"),Vn=v.zo.div(Cn||(Cn=(0,m.Z)(["\n  display: flex;\n  height: calc(100vh - ",");\n"])),Mn),Rn=v.zo.div(En||(En=(0,m.Z)(["\n  padding: 25px;\n  padding-top: 50px;\n  max-width: 400px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  flex-grow: 1;\n\n  --background-fallback: rgb(245, 245, 245);\n  --gradient-start-color: rgba(240, 248, 255, 1);\n  --gradient-end-color: rgba(245, 245, 245, 1);\n\n  background: var(--background-fallback);\n  background: linear-gradient(\n    0deg,\n    var(--gradient-start-color) 55%,\n    var(--gradient-end-color) 100%\n  );\n\n  /* background: linear-gradient(105.62deg, #524abe -7.88%, #6684ff 100%); */\n"]))),Wn=v.zo.div(An||(An=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 25px;\n  padding-top: 50px;\n  flex-grow: 1;\n"]))),Dn=v.zo.div(Sn||(Sn=(0,m.Z)(["\n  display: flex;\n  /* flex-direction: column; */\n  gap: 10px;\n"]))),Bn=(0,v.zo)(J.Or)(Tn||(Tn=(0,m.Z)(["\n  --size: 40px;\n"]))),Fn=(0,v.zo)(J.Or)(Nn||(Nn=(0,m.Z)(["\n  --size: 40px;\n"]))),Hn=(0,v.zo)(Ln.b9W)(Pn||(Pn=(0,m.Z)(["\n  --size: 50%;\n  height: var(--size);\n  width: var(--size);\n"]))),Kn=(0,v.zo)(Ln.ilJ)(_n||(_n=(0,m.Z)(["\n  --size: 50%;\n  height: var(--size);\n  width: var(--size);\n"]))),On=v.zo.div(In||(In=(0,m.Z)(["\n  display: flex;\n  gap: 20px;\n"])));function Yn(){var n=(0,s.v9)(u.Af),e=n.items,r=n.isLoading,t=n.error,o=n.currentId,i=(0,l.useState)(!1),a=(0,d.Z)(i,2),c=a[0],p=a[1],m=function(){return p(!c)},v=(0,s.I0)();(0,l.useEffect)((function(){v((0,h.yF)()).unwrap().catch((function(){return g.Am.error("Error loading contacts. Please refresh the page")}))}),[v]);return(0,Z.jsxs)(Vn,{children:[(0,Z.jsxs)(Rn,{children:[(0,Z.jsxs)(On,{children:[(0,Z.jsx)(S,{}),(0,Z.jsxs)(Dn,{children:[(0,Z.jsx)(Bn,{type:"button",onClick:m,disabled:t,"aria-label":"New contact",children:(0,Z.jsx)(Hn,{})}),(0,Z.jsx)(Fn,{type:"button",onClick:function(){var n={name:f.We.person.fullName(),number:f.We.phone.number()};v((0,h.uK)(n)).then(g.Am.success("".concat(n.name," has been added to the phonebook"))).catch((function(n){return g.Am.error(n.message)}))},disabled:t,"aria-label":"New random contact (for testing)",children:(0,Z.jsx)(Kn,{})})]})]}),e.length>0&&(0,Z.jsx)(y,{})]}),(0,Z.jsxs)(Wn,{children:[!o&&!t&&(0,Z.jsx)(kn,{isEmpty:0===e.length}),!r&&t&&(0,Z.jsx)(kn,{isError:null!==t}),o&&!t&&(0,Z.jsx)(hn,{})]}),c&&(0,Z.jsx)(q,{onClose:m,children:(0,Z.jsx)(x.Z,{title:"New Contact",children:(0,Z.jsx)(sn,{formType:"add",toggleModal:m})})})]})}var Gn=r(6907);function Jn(){var n=(0,s.v9)(u.Hz).isLoggedIn;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Gn.ql,{children:[(0,Z.jsx)("title",{children:"Contacts"}),(0,Z.jsx)("meta",{name:"description",content:"My contacts"})]}),n&&(0,Z.jsx)(Yn,{})]})}}}]);
//# sourceMappingURL=940.c40eae34.chunk.js.map